<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CCS Controller Wiki - Technical documentation and specifications for CCS charging controllers">
    <title>CCS Controller Wiki | MW Controllers</title>
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">
    <link rel="stylesheet" href="../css/site.css">
</head>
<body class="theme-ccs">
    <div id="navbar-placeholder" data-lang="en"></div>

    <section class="hero">
        <div class="hero-content">
            <div class="hero-icon">
                <img src="../img/ccs_icon.png" alt="CCS Icon" style="width:100%; height:100%; object-fit: contain;">
            </div>
            <h1 class="text-xxl">CCS Controller Wiki</h1>
            <p class="text-large">Technical documentation and specifications for CCS charging controllers</p>
        </div>
    </section>

    <main class="container">
        <section class="columns">
            <div class="column col-12">
                <h2 class="section-title">Overview</h2>
                <div class="card p-2">
                    <p style="color: #e03e2d; text-decoration: underline;">The description of the standard does not claim to be in absolute compliance with the official documentation, it is our interpretation with its own hardware and software implementation.</p>
                    <p>The "CCS" standard has an undeniable elegance in its implementation, but also a complexity in its hardware and software.</p>
                    <p>The main idea of ​​the developers was to provide high-level communication based on the then-existing "TYPE 2" standard for use in transmitting additional parameters for both AC and DC charging systems.</p>
                    <div class="figures-inline" style="display: flex; flex-wrap: wrap; gap: 2rem; align-items: flex-end; justify-content: center; margin: 1rem 0;">
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/4/4a/Combo-ccs-eu.svg" alt="CCS 2" style="width: 200px; height: auto; object-fit: contain;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">CCS2 (IEC-62196-3)</figcaption>
                        </figure>
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/4/4c/Type_2_mennekes.svg" alt="Type 2" style="width: 200px; height: auto; object-fit: contain;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">TYPE 2 (IEC-62196-2)</figcaption>
                        </figure>
                    </div>
                    <p>The developers opted for a PLC modem, which provides data transmission over the "CP" line.</p>
                </div>
                <div class="column col-12">
                    <h2 class="section-title">Hardware</h2>
                    <div class="card p-2">
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="../img/ccs_wiki/hadware_block.png" alt="CCS Hardware" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">The image above shows the block diagram of the PLC hardware implementation.</figcaption>
                        </figure>
                        <h6 style="margin-bottom: 0.5rem; color: var(--accent); font-size: 0.95rem;">Blocks description:</h6>
                        <ul class="state-list" style="list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 0.5rem;">
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">PLC modem</span> — the SOC that implements the "HomePlug AV" and IEEE 1901 standard.
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">Generator</span> — the circuit that generates a pulse-width signal with a frequency of 1000 Hz and a duty cycle of 5%.</li>
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">Opamp</span> — the circuit that generates a signal with an amplitude of +12 V and -12 V coming from the generator.</li>
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">Adc</span> — the circuit that measures the amplitude of the generated signal.</li>
                        </ul>
                        <p>
                            The "CP" signal is fed to the electric vehicle's input connector. Depending on the charging session's stage, the vehicle changes the "CP" signal amplitude by connecting load resistors to the "CP" line.
                            The charging system, in turn, reacts to these changes by making appropriate decisions.
                            The "ADC" node must measure the amplitudes of the positive and negative components of the "CP" signal.
                        </p>
                        <h6 style="margin-bottom: 0.5rem; color: var(--accent); font-size: 0.95rem;">Positive component states:</h6>
                        <ul class="state-list" style="list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 0.5rem;">
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">+12V</span> — the charging connector is not inserted into the vehicle.</li>
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">+9V</span> — the charging connector is inserted into the vehicle.</li>
                            <li style="display: flex; align-items: baseline; gap: 0.5rem; padding: 0.5rem 0.75rem; background: var(--chip-bg); border-radius: 8px; border-left: 3px solid var(--accent);"><span style="font-weight: 700; color: var(--accent); min-width: 3rem;">+6V / +3V</span> — the vehicle is ready for charging.</li>
                        </ul>
                        <p>
                            In addition to changing the "CP" signal level, high-level communication occurs. The "CP" signal is used as the carrier frequency. High-level communication is an OFDM modulated signal.
                        </p>
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="../img/ccs_wiki/plc_communication.png" alt="CCS Hardware" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">The image above shows the signal on CP line.</figcaption>
                        </figure>
                    </div>
                </div>
                <div class="column col-12">
                    <h2 class="section-title">Software</h2>
                    <div class="card p-2">
                        <p>When the charging outlet is inserted into the electric vehicle, the "CP" signal level drops to ~9 V. At this point, the vehicle detects the insertion of the charging connector and prepares to wait for a 5% pulse-width modulation (PWM) signal.</p>
                        <p>Upon receiving the enable signal, the charging controller should begin generating a PWM signal with a 5% duty cycle.</p>
                        <p>Upon detecting a PWM signal with a 5% duty cycle on the line, the vehicle initiates high-level communication.</p>
                        <p>The message exchange process, called SLAC.</p>
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="../img/ccs_wiki/slac_seq.png" alt="SLAC seq" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">SLAC sequence.</figcaption>
                        </figure>
                        <p>The main objective of this process is to determine whether the charging station is connected to the electric vehicle by measuring the attenuation of the PLC signal. At this stage, we also learn the MAC address of the electric vehicle and communicate our MAC address to it.</p>
                        <p>After receiving "CM_SLAC_MATCH.CNF" the electric vehicle initiates the procedure of exchanging IPv6 addresses by means of: SDP procedure and ICMPv6 process.</p>
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="../img/ccs_wiki/ipv6_1.png" alt="SLAC seq" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">SDP log.</figcaption>
                        </figure>
                        After this stage, we will also find out the ports for further establishment of TCP connection.
                        <figure style="margin: 0; text-align: center; flex: 0 0 auto;">
                            <img src="../img/ccs_wiki/ipv6_2.png" alt=" " style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto;">
                            <figcaption style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">SDP log.</figcaption>
                        </figure>
                        <p> The entire subsequent process of negotiating charging session parameters occurs using EXI (Efficient XML Interchange). This data exchange model, based on defined schemas, enables data compression to ensure more efficient use of communication channel bandwidth. </p>
                        <h5 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">Charging stages</h5>
                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">SupportedAppProtocol processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_protocols.png" alt="SupportedAppProtocol" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage, the electric vehicle reports the supported charging protocols (DIN70121, ISO15118) and standard versions.
                                The controller selects the protocol it will use to charge the electric vehicle.</p>
                        </div>
                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">SessionSetup processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_sesion_setup.png" alt="SessionSetup" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage, the electric vehicle and charging controller exchange EVCCID and EVSEID values.</p>
                        </div>
                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">ServiceDiscovery processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_discovery.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage, the charging controller reports available services.</p>
                        </div>
                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">ServicePaymentSelection processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_service_pay.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage based on the provided services and the corresponding payment options by the SECC this message pair allows the transmission of the selected PaymentOption, SelectedServices and related ParameterSets.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">ServicePaymentSelection processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_service_pay.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage based on the provided services and the corresponding payment options by the SECC this message pair allows the transmission of the selected PaymentOption, SelectedServices and related ParameterSets.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">ContractAuthentication processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_contract.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">By using the EVSEProcessing parameter, the EVSE can indicate to the EVCC that the processing has not finished but a response message was sent to fulfil the timeout and performance requirements.
                                This allows delaying the V2G Communication Session while fulfilling the performance and timeout requirements.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">ChargingParameterDetection processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_param_detect.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage, the electric vehicle and charging controller are configured with charging session parameters (maximum allowable current, minimum allowable voltage, maximum power, etc.)</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">CableCheck processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_cable_check.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage, the electric vehicle indicates that it is ready for the insulation test. The charging station performs the test using its built-in insulation tester and, upon completion, notifies the electric vehicle of the test status.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">PreСharge processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_pre_charge.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">At this stage, the vehicle requests a specific voltage and current from the charging station, allowing the station's slower power modules to reach the required level in advance.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">PowerDelivery processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_power_deliv.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">The electric vehicle measures the voltage requested during the "Precharge" stage and, upon detecting that the voltage level reaches a specified value, generates a "Power Delivery Request," indicating that it is ready to charge.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">Charging processing</h6>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_charging.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">During the charging process, the electric vehicle requests current, the voltage indicates the percentage of charge and a number of other parameters, the charging controller reports the output voltage level, current, and related parameters.</p>
                        </div>

                        <div class="wiki-step" style="margin-bottom: 1.5rem; padding: 1rem 1.25rem; background: var(--chip-bg); border-radius: 10px; border-left: 4px solid var(--accent);">
                            <h6 style="margin: 0 0 0.75rem 0; color: var(--accent); font-size: 0.95rem; font-weight: 700;">The end of session</h6>
                            <p style="margin: 0; line-height: 1.6;">The stopping process can be initiated by either the electric vehicle or the charging station.</p>
                            <p style="margin: 0; line-height: 1.6;">Stopping a charging session results in the generation of a "PowerDeliveryReq" and the setting of the corresponding flag.</p>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_stop1.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">The electric vehicle can then initiate the "Welding Detection" process. Alternatively, it can immediately generate a "Session Stop Req".</p>
                            <figure style="margin: 0 0 0.75rem 0; text-align: center;">
                                <img src="../img/ccs_wiki/ipv6_stop2.png" alt="ServiceDiscovery" style="width: 90%; max-width: 900px; height: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            </figure>
                            <p style="margin: 0; line-height: 1.6;">The charging station must ensure that the power modules are stopped and all necessary stopping procedures are carried out.</p>
                        </div>
                    </div>
                </div>


            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 MW Controllers. CCS Controller Wiki.</p>
    </footer>
    <script src="../js/navbar.js"></script>
</body>
</html>

